# This file is managed by Puppet!
#
# Serve our repositories using Git's Smart HTTP.  Anonymous read access is
# granted, but write access requires authentication.  Presently we do not have
# authentication configured here so write access is effectively disabled.  For
# more details see:
#
#   http://git-scm.com/book/en/v2/Git-on-the-Server-Smart-HTTP
#   http://git-scm.com/docs/git-http-backend

SetEnv GIT_PROJECT_ROOT /home/git
SetEnv GIT_HTTP_EXPORT_ALL
ScriptAlias /git/ /usr/libexec/git-core/git-http-backend/

<Directory "/usr/lib/git-core*">
    Options ExecCGI Indexes
    Order allow,deny
    Allow from all
    <IfModule mod_authz_core.c>
        # necessary for Apache >= 2.4
        Require all granted
    </IfModule>
</Directory>

<LocationMatch "^/git/.*/git-receive-pack$">
    AuthType Basic
    AuthName "Git Access"
    Require group committers
</LocationMatch>

# vim: syntax=apache
