<VirtualHost *:80>

    Alias /static/ "<%= @python_base %>/django/contrib/admin/static/"
    <Directory "<%= @python_base %>/django/contrib/admin/static/">
        Require all granted
    </Directory>

    # TODO: assemble these fragments using concat (from the Puppet Forge)
    # with each fragment being contributed by their respective modules to
    # achieve a cleaner separation of responsibilities.
    WSGIDaemonProcess dhcpd_driven user=<%= @django_user %> group=<%= @django_group %> threads=25
    WSGIProcessGroup dhcpd_driven

    WSGIScriptAlias /managed_switches "<%= @python_base %>/dhcpd_driven/master/master/wsgi.py" process-group=dhcpd_driven
    <Directory "<%= @python_base %>/dhcpd_driven/">
        <Files wsgi.py>
            Require all granted
        </Files>
    </Directory>

    WSGIDaemonProcess firewall_driven user=<%= @django_user %> group=<%= @django_group %> threads=25
    WSGIProcessGroup firewall_driven

    WSGIScriptAlias /managed_firewalls "<%= @python_base %>/firewall_driven/master/master/wsgi.py" process-group=firewall_driven
    <Directory "<%= @python_base %>/firewall_driven/">
        <Files wsgi.py>
            Require all granted
        </Files>
    </Directory>

</VirtualHost>
